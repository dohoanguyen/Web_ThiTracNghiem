@{
    ViewBag.Title = "Tin tức - TUQ Education";
    Layout = "~/Views/Shared/LayoutPage.cshtml";
}

<section class="py-12 md:py-12 text-center">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-3xl">
            <h1 class="text-4xl md:text-5xl font-extrabold mb-4 text-primary">
                Tin tức
            </h1>
            <p>Nơi cập nhật thông tin kỳ thi, khóa học, và kinh nghiệm học tập.</p>
        </div>

        @if (ViewBag.Loi != null)
        {
            <div class="text-center text-red-500 mb-6">@ViewBag.Loi</div>
        }

        <div class="grid grid-cols-1 md:grid-cols-12 gap-8">
            <!-- Danh sách bài viết -->
            <div class="md:col-span-8">
                <div class="space-y-8">
                    @if (ViewBag.BaiViet != null && ViewBag.BaiViet.Count > 0)
                    {
                        foreach (var bai in ViewBag.BaiViet)
                        {
                            <article class="flex flex-col sm:flex-row gap-6 bg-surface-light dark:bg-surface-dark p-4 rounded-xl shadow-sm hover:shadow-lg transition-shadow duration-300">
                                <a class="block sm:w-1/3 flex-shrink-0" href="@bai.DiaChi">
                                    <img src="@bai.HinhAnh" alt="@bai.TieuDe" class="rounded-lg object-cover w-full h-48 sm:h-full" />
                                </a>
                                <div class="flex flex-col justify-between">
                                    <div>
                                        <div class="flex items-center text-sm text-text-muted-light dark:text-text-muted-dark mb-2 gap-4">
                                            <span class="bg-primary/10 text-primary font-medium px-3 py-1 rounded-full text-xs">@bai.ChuDe</span>
                                            <span class="flex items-center gap-1.5">
                                                <span class="material-symbols-outlined text-base">calendar_today</span> @bai.NgayDang.ToString("dd MMMM, yyyy")
                                            </span>
                                        </div>
                                        <h2 class="text-xl font-bold mb-2">
                                            <a href="@bai.DiaChi" class="hover:text-primary dark:hover:text-primary transition-colors">@bai.TieuDe</a>
                                        </h2>
                                        <p class="text-text-muted-light dark:text-text-muted-dark text-sm line-clamp-2">@bai.TomTat</p>
                                    </div>
                                    <a class="mt-4 font-semibold text-primary flex items-center gap-1 group" href="@bai.DiaChi">
                                        Đọc thêm <span class="material-symbols-outlined transition-transform group-hover:translate-x-1">arrow_forward</span>
                                    </a>
                                </div>
                            </article>
                        }
                    }
                    else
                    {
                        <p>Chưa có bài viết nào.</p>
                    }
                </div>

                <!-- Phân trang -->
                <div class="mt-12 text-center">
                    <div class="inline-flex items-center space-x-1">
                        @for (int i = 1; i <= ViewBag.TongSoTrang; i++)
                        {
                            <a href="?trang=@i" class="px-3 py-2 rounded-lg @(i == ViewBag.TrangHienTai ? "bg-primary text-white" : "hover:bg-surface-light dark:hover:bg-surface-dark")">@i</a>
                        }
                        <a href="?trang=@(ViewBag.TrangHienTai + 1)" class="px-3 py-2 rounded-lg flex items-center">
                            <span>Tiếp</span>
                            <span class="material-icons text-lg">chevron_right</span>
                        </a>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <aside class="md:col-span-4 space-y-8">
                <!-- Tìm kiếm bài viết -->
                <div class="bg-surface-light dark:bg-surface-dark p-6 rounded-xl shadow-sm">
                    <h3 class="text-xl font-bold mb-4">Tìm kiếm bài viết</h3>
                    <div class="relative">
                        <input class="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-background-light dark:bg-background-dark focus:ring-2 focus:ring-primary focus:border-primary" placeholder="Nhập từ khóa..." type="text" />
                        <span class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-text-muted-light dark:text-text-muted-dark">search</span>
                    </div>
                </div>

                <!-- Chủ đề -->
                @*<div class="bg-surface-light dark:bg-surface-dark p-6 rounded-xl shadow-sm">
                        <h3 class="text-xl font-bold mb-4">Chủ đề</h3>
                        <ul class="space-y-3">
                            @foreach (var chuDe in ViewBag.ChuDe)
                            {
                                <li>
                                    <a href="@chuDe.DiaChi" class="flex justify-between items-center text-text-muted-light dark:text-text-muted-dark hover:text-primary dark:hover:text-primary transition-colors">
                                        @chuDe.Ten <span class="text-sm font-mono bg-gray-100 dark:bg-gray-700 px-2 py-0.5 rounded">@chuDe.SoLuong</span>
                                    </a>
                                </li>
                            }
                        </ul>
                    </div>*@

                <!-- Bài viết nổi bật -->
                <div class="bg-surface-light dark:bg-surface-dark p-6 rounded-xl shadow-sm">
                    <h3 class="text-xl font-bold mb-4">Bài viết nổi bật</h3>
                    <div class="space-y-4">
                        @foreach (var baiNoiBat in ViewBag.BaiVietNoiBat)
                        {
                            <a href="@baiNoiBat.DiaChi" class="flex items-center gap-4 group">
                                <img alt="@baiNoiBat.TieuDe" class="w-20 h-20 rounded-lg object-cover flex-shrink-0" src="@baiNoiBat.HinhAnh" />
                                <div>
                                    <h4 class="font-semibold group-hover:text-primary transition-colors line-clamp-2">@baiNoiBat.TieuDe</h4>
                                    <p class="text-xs text-text-muted-light dark:text-text-muted-dark mt-1">@baiNoiBat.NgayDang.ToString("dd MMMM, yyyy")</p>
                                </div>
                            </a>
                        }
                    </div>
                </div>
            </aside>
        </div>
    </div>
</section>
